<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<META content="IE=11.0000" http-equiv="X-UA-Compatible">
	<META name="GENERATOR" content="MSHTML 11.00.9600.17344">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	#parse("/common/common.htm")
</head>
<body class="body-content">
	<!-- 当前位置开始 -->
    <div class="alltitle">
    <p>修改角色</p>
	</div>
    <!-- 当前位置结束 -->

  <div class="Listzk">
      <div class="ManagerForm" style="margin-left:20px 0 0 8px;width:580px">
			<table width="580" height="240" border="0" class="add-role" cellspacing="0" cellpadding="0" style="margin-top:10px; margin-bottom:10px;">
				  #set($permission=${roleController.getPermissionJSON()})
				  #set($nId=${request.getParameter("nId")})
				  #set($role=${roleController.getRole($nId)})
				  <input type="hidden" name="nId" id="nId" value="$nId" />
				  <input type="hidden" name="strPermission" id="rolePermission" value="${role.getStringValue("strPermission")}" />
				  <tr height="40" >
				    <td height="32" align="right" width="20%" class="table-title">角色名称：</td>
				    <td height="35" >
				    <input id="roleName" name="roleName" type="text" vtype="string" value="${role.getStringValue("strName")}" size="61" vname="角色名称" vminlength="2" vmaxlength="20" onblur="checkRegisterInfo(0)"/>
				    </td>
				  </tr>
				   <tr height="40" >
				    <td height="32" align="right" width="20%" class="table-title">角色编码：</td>
				    <td height="35" >
				    	<input id="roleCode" name="roleCode" type="text" vtype="string" value="${role.getStringValue("strRoleCode")}" size="61" vname="角色编码" vminlength="2" vmaxlength="20" onblur="checkRegisterInfo(1)"/>
				    </td>
				  </tr>
				  <tr height="200" valign="top" >
				    <td height="32" align="right" width="20%" class="table-title">角色权限：</td>
				    <td height="200">
						<script>
							var jsonData=$permission;
							jsonData=jsonData.cdosItemList;
							var selectPermission=document.getElementById("rolePermission").value;
							var arrSelected=selectPermission.split("|");
							var tree=new MultiChoiceTree("idTree",jsonData);
							tree.setSelectedNodeIds(arrSelected);
							tree.setVarName("strId","strName","cdosItemList");
							tree.setIconPath(strRootPath+"\/cdojs/Icon\/");
							tree.show(false,400,0,false,false);
						</script>
						<br/>
					 </td>
				  </tr>
			</table>
	</div>
	<table width="236" align="center" height="50" style="margin-left:240px;">
		<tr><td>
		<span><input type="button" class="seach_btn newseach_btn"  value="确 定" name="提交" onclick="modifyRole();"/>
		<input type="button"  value="返回" class="seach_btn newseach_btn yellow-bg" onclick="location.replace('list.htm')"/></span>
		</td></tr>
	</table>
   </div>
</body>
<script type="text/javascript" src="modify.js" ></script>
</html>
